terraform {
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 3.27"
    }
  }

  required_version = ">= 0.14.9"
}

provider "aws" {
  profile = "default"
  region  = "us-west-2"
}

resource "aws_instance" "app_server" {
  ami           = "ami-0cf6f5c8a62fa5da6" //Amazon Linux 2 AMI (HVM), SSD Volume Type
  instance_type = "t3.micro"

  vpc_security_group_ids = [ aws_security_group.web.id ]

  tags = {
    Name = "ExampleAppServerInstance"
    Owner = "Gezalova Ksenia"
  }

  user_data = <<EOF
  #!/bin/bash
  yum -y update
  yum -y install httpd
  echo "<h2 style="text-align:center;">Hello!</h2><br><img style='display:block; margin:auto;max-width:100%' alt='Hamster' src='data:image/jpeg;base64,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'/>" > /var/www/html/index.html
  service httpd start
  chkconfig httpd on
  EOF
}

resource "aws_security_group" "web" {
  name = "WebServer"
  description = "Security group for webserver"

  ingress = [ 
    {
      cidr_blocks = [ "0.0.0.0/0" ]
      description = "Allow PORT http"
      from_port = 80
      to_port = 80
      protocol = "tcp"
      ipv6_cidr_blocks = []
      prefix_list_ids = []
      self = false
      security_groups = []
    }, 
    {
        cidr_blocks = [ "0.0.0.0/0" ]
        description = "Allow PORT https"
        from_port = 443
        to_port = 443
        protocol = "tcp"
        ipv6_cidr_blocks = []
        prefix_list_ids = []
        self = false
        security_groups = []
    } 
  ]

  egress = [
    {
      cidr_blocks = [ "0.0.0.0/0" ]
      description = "Allow all PORTS"
      from_port = 0
      to_port = 0
      protocol = "-1"
      ipv6_cidr_blocks = []
      prefix_list_ids = []
      self = false
      security_groups = []
    } 
  ]

  tags = {
    Name = "ExampleAppServerInstanceSecurity"
    Owner = "Gezalova Ksenia"
  }
}
